@using Domain
@using global::Shared

<Table TItem="Idea" Data="@Ideas" Columns="@_columns" />

@code {
    [Parameter]
    public List<Idea> Ideas { get; set; }

    private List<TableColumn<Idea>> _columns;

    protected override void OnInitialized()
    {
        _columns = new List<TableColumn<Idea>>
        {
            new TableColumn<Idea>
            {
                Label = "Название",
                GetValue = (idea) => idea.Name
            },
            new TableColumn<Idea>
            {
                Label = "Проблема",
                GetValue = (idea) => idea.Problem
            },
            new TableColumn<Idea>
            {
                Label = "Статус",
                GetValue = (idea) => idea.Status.ToString()
            },
            new TableColumn<Idea>
            {
                Label = "Инициатор",
                GetValue = (idea) => $"{idea.Initiator?.FirstName} {idea.Initiator?.LastName}"
            },
            new TableColumn<Idea>
            {
                Label = "Создано",
                GetValue = (idea) => idea.CreatedAt.ToShortDateString()
            },
            new TableColumn<Idea>
            {
                Label = "Рейтинг",
                GetValue = (idea) => idea.Rating?.ToString("F1")
            }
        };
    }
}
